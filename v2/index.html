<html>
<body>
	<head>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<style>
			body { font-family: 'Open Sans', sans-serif; }
			p { font-size: 13px; margin:0; padding:0; }
			h3 { font-weight: normal; font-size: 16px; margin-bottom:0; }
		</style>
	</head>

	<h1>Password Strength Demos</h1>

	<h3>Password Strength v1</h3>
	<p>Complexity scoring system</p>
	<p><input type="text" name="new_password1" size="40" /></p>

	<br />

	<h3>Password Strength v2</h3>
	<p>zxcvbn algorithm</p>
	<p><input type="text" name="new_password2" size="40" /></p>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script>
		(function($) {
			'use strict';
			var displayArr = [];
			displayArr[1] = ['#f5a9a9', 'Very Weak'];
			displayArr[2] = ['#f5d0a9', 'Weak'];
			displayArr[3] = ['#f3f781', 'Good'];
			displayArr[4] = ['#a9f5a9', 'Strong'];
			displayArr[5] = ['#00ff00', 'Very Strong'];
			$.ajax({
				url: 'zxcvbn.js',
				dataType: 'script',
				cache: true,
				success: function() {
					$.fn.passwordStrength2 = function() {
						return this.each(function() {
							var inputField = $(this),
								displayMsg = $('<div/>');
							displayArr[0] = [inputField.css('background-color'), ''];
							function trigger() {
								var inputp = inputField.val(),
									result = zxcvbn(inputp);
								showStrength(inputField, (result.score + (inputp.length > 0)));
							}
							function showStrength(field, score) {
								field.css('background-color', displayArr[score][0]);
								displayMsg.html(displayArr[score][1]);
							}
							inputField
								.bind('keyup blur', trigger)
								.after(displayMsg);
						});
					};
					$('input[name=new_password2]').passwordStrength2();
				}
			});
			$.fn.passwordStrength1 = function() {
				return this.each(function() {
					var inputField = $(this),
						displayMsg = $('<div/>');
					displayArr[0] = [inputField.css('background-color'), ''];
					function scorePassword(password) {
						return 0
							+ ( password.length > 5 )
							+ ( password.length > 12 )
							+ ( /[a-z]/.test(password) && /[A-Z]/.test(password) )
							+ ( /\d/.test(password) && /\D/.test(password) )
							+ ( /[!@#$%^&*?_~\-(),]/.test(password) && /\w/.test(password) );
					}
					function showStrength(field, score) {
						field.css('background-color', displayArr[score][0]);
						displayMsg.html(displayArr[score][1]);
					}
					function trigger() {
						var input = inputField.val(),
							score = Math.max(scorePassword(input), + (input.length > 0));
						console.log(score);
						showStrength(inputField, score);
					}
					inputField
						.bind('keyup blur', trigger)
						.after(displayMsg);
				});
			};
			$(function() {
				$('input[name=new_password1]').passwordStrength1();
			});
		})(jQuery);
	</script>

</body>
</html>
